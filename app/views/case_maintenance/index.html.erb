<html>
	<head>
		<script>
			var sortingOrder = 'case_header.case_id';
		</script>
	</head>

	<body ng-app="case_detail" >

		<%= render"shared/menu" %>

		<div id="CaseListCtrl" ng-controller="CaseListCtrl" class="maintenance_screen_div">

			<div>
				<h3>
                  <a href="/case"> <span class="label label-primary">Case List</span></a>
                </h3>
			</div>
			<div class="input-group pull-right" style="width: 30%">
				<input type="text" ng-model="query" ng-change="search()" class="form-control" placeholder="Search">
				<span class="input-group-addon"><i class="icon-search"></i></span>
			</div>

			<div>
              <tabset>
                <tab heading="Created" select="status('Created')"></tab>
                <tab heading="Received" select="status('Received')"></tab>
                <tab heading="Consumed" select="status('Consumed')"></tab>
              </tabset>

			</div>
			<table class="table">
				<thead>
					<tr>
						<th colspan="7">
						<div class="bs-callout">
							<div class="row-header">
								Option
							</div>
							<div class="row-header">
								Case Id&nbsp;<a ng-click="sort_by('case_id')"><i class="fa fa-sort"></i></a>
							</div>
							<div class="row-header">
								Shipment Number&nbsp;<a ng-click="sort_by('shipment_nbr')"><i class="fa fa-sort"></i></a>
							</div>
							<div class="row-header">
								Location<a ng-click="sort_by('vendor_nbr')"><i class="fa fa-sort"></i></a>
							</div>
							<div class="row-header">
								Record Status&nbsp;<a ng-click="sort_by('record_status')"><i class="icon-sort"></i></a>
							</div>
							<div class="row-header">
								<a id="open_case_add"  ng-click="case_add_modal('lg')"> <i class="icon-plus-sign"></i></a>
							</div>
						</div></th>
					</tr>
				</thead>

				<tbody>
					<tr ng-repeat="item in pagedItems[currentPage]">
						
						<td colspan="7">
						<div  class="bs-callout bs-callout-info">
                          <div class="row-header" ng-click="toggle_expand(item)" >
                            <i class="{{item.show ? 'fa fa-caret-down fa-lg' : 'fa fa-caret-right fa-lg'}}" style="color:#428bca"></i></a>
                          </div>
							<div class="row-header">
								{{item.case_header.case_id}}
							</div>
							<div class="row-header">
								{{item.case_header.shipment_nbr}}
							</div>
							<div class="row-header">
								{{item.case_header.location}}
							</div>
							<div class="row-header">
								{{item.case_header.record_status}}
							</div>
                          <div class="row-header">
                            <a id="open_case_detail" ng-click="case_edit_modal('lg', item.case_header)">
                              <i class="fa fa-pencil"></i>
                            </a>
                          </div>

							</div><!--Detail -->
						<div ng-show="item.show" style="padding-left: 0%">
							<div class="label label-default">
								<div class="row-header"></div>
								<div class="row-header">
									Shipped Quantity
								</div>
								<div class="row-header">
									Received Quantity
								</div>
								<div class="row-header">
                                  <a id="open_case_detail_add" ng-click="case_detail_add_modal('lg', item.case_header)">
                                    <i class="icon-plus-sign"></i>
                                  </a>
                                </div>

							</div>
							<div ng-repeat="detail in item.case_detail" class="bs-callout">
								<div class="row-header">
									{{detail.item}}
								</div>
								<div class="row-header">
									{{detail.quantity}}
								</div>
								<div class="row-header">
									{{detail.coo}}
								</div>
                              <div class="row-header">
                                <a id="open_case_detail_edit" ng-click="case_detail_edit_modal('lg', item.case_header, detail.id)">
                                  <i class="icon-edit"></i></a>
                              </div>


							</div>
						</div>
						</td>
					</tr>

				</tbody>
				<tfoot>
					<td colspan="7">
					<div>
						<ul class="pagination pull-right">
							<li ng-class="{disabled: currentPage == 0}">
								<a href ng-click="prevPage()">« Prev</a>
							</li>
							<li ng-repeat="n in range(pagedItems.length)"
							ng-class="{active: n == currentPage}"
							ng-click="setPage()">
								<a href ng-bind="n + 1">1</a>
							</li>
							<li ng-class="{disabled: currentPage == pagedItems.length - 1}">
								<a href ng-click="nextPage()">Next »</a>
							</li>
						</ul>
					</div></td>
				</tfoot>
			</table>

          <script type="text/ng-template" id="myModalContent.html">
            <div class="modal-header">
              <h3 class="modal-title">Case Maintenance</h3>
            </div>
            <div class="modal-body">
              <ul>
                <li ng-repeat="item in items">
                  <a ng-click="selected.item = item">{{ item }}</a>
                </li>
              </ul>
              Selected: <b>{{ selected.item }}</b>
            </div>
            <div class="modal-footer">
              <button class="btn btn-primary" ng-click="ok()">Exit</button>
            </div>
          </script>

		</div>

	</body>
</html>
